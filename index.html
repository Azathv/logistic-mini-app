<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Yuklar Go</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;padding:14px;background:#0f0f0f;color:#fff;font-family:Arial}
.header{display:flex;align-items:center;gap:10px;margin-bottom:14px}
.header img{width:40px;height:40px;border-radius:50%;background:#333}
.tabs{display:flex;gap:6px;margin-bottom:12px}
.tab{flex:1;padding:10px;text-align:center;border-radius:10px;background:#1c1c1c}
.tab.active{background:#2ea6ff}
button{width:100%;padding:16px;margin:8px 0;border:none;border-radius:14px;background:#2ea6ff;color:#fff;font-size:16px;font-weight:600}
select,input{width:100%;padding:12px;margin:6px 0;border-radius:10px;border:none;font-size:15px}
.card{background:#1c1c1c;padding:12px;border-radius:12px;margin-bottom:10px}
.hidden{display:none}

.load-card{
  background:#1c1c1c;
  padding:12px;
  border-radius:12px;
  margin-bottom:10px;
}
.load-card img{
  width:100%;
  border-radius:10px;
  margin-top:8px;
}
.location{
  font-size:12px;
  color:rgba(255,255,255,0.5);
  font-style:italic;
  margin-top:6px;
}
</style>
</head>

<body>

<div class="header">
  <img id="avatar">
  <div id="hello">Salom</div>
</div>

<div class="tabs">
  <div class="tab active">ğŸš— Yengil</div>
  <div class="tab">ğŸš Oâ€˜rta</div>
  <div class="tab">ğŸšš Ogâ€˜ir</div>
</div>

<div id="home">
  <button onclick="openAdd()">â• Yuk joylash</button>
</div>

<div id="add" class="hidden">
  <div class="card">
    <b>ğŸ“ Qayerdan</b>
    <select id="fromRegion"></select>
    <select id="fromDistrict"></select>
  </div>

  <div class="card">
    <b>ğŸ¯ Qayerga</b>
    <select id="toRegion"></select>
    <select id="toDistrict"></select>
  </div>

  <input id="weight" placeholder="Yuk (masalan: 3 tonna)">
  <input type="file" id="image" accept="image/*">
  <input id="contact" placeholder="Telegram yoki telefon">

  <button onclick="save()">Saqlash</button>
  <button onclick="back()">â† Orqaga</button>
</div>

<div id="list"></div>

<script>
// TELEGRAM USER
if(window.Telegram?.WebApp){
  Telegram.WebApp.expand();
  const u=Telegram.WebApp.initDataUnsafe.user;
  if(u){
    hello.innerText="Salom, "+u.first_name;
    if(u.photo_url) avatar.src=u.photo_url;
    if(u.username) contact.value="@"+u.username;
  }
}

// ğŸ”¥ TOâ€˜LIQ HUDUDLAR
const regions={
"Qoraqalpogâ€˜iston Respublikasi":["Amudaryo","Beruniy","Boâ€˜zatov","Chimboy","Ellikqalâ€™a","Kegeyli","Moâ€˜ynoq","Nukus","Qanlikoâ€˜l","Qoâ€˜ngâ€˜irot","Qoraoâ€˜zak","Shumanay","Taxtakoâ€˜pir","Toâ€˜rtkoâ€˜l","Xoâ€˜jayli","Nukus shahri"],
"Andijon viloyati":["Andijon","Asaka","Baliqchi","Buloqboshi","Izboskan","Jalakuduq","Marhamat","Oltinkoâ€˜l","Paxtaobod","Shahrixon","Ulugâ€˜nor","Xoâ€˜jaobod","Andijon shahri","Asaka shahri","Xonobod shahri"],
"Buxoro viloyati":["Buxoro","Gâ€˜ijduvon","Jondor","Kogon","Olot","Peshku","Qorakoâ€˜l","Qorovulbozor","Romitan","Shofirkon","Vobkent","Buxoro shahri","Kogon shahri"],
"Jizzax viloyati":["Arnasoy","Baxmal","Doâ€˜stlik","Forish","Gâ€˜allaorol","Mirzachoâ€˜l","Paxtakor","Sharof Rashidov","Yangiobod","Zomin","Jizzax shahri"],
"Qashqadaryo viloyati":["Chiroqchi","Dehqonobod","Gâ€˜uzor","Kasbi","Kitob","Koson","Mirishkor","Muborak","Nishon","Qamashi","Qarshi","Shahrisabz","Yakkabogâ€˜","Qarshi shahri","Shahrisabz shahri"],
"Navoiy viloyati":["Karmana","Konimex","Navbahor","Nurota","Qiziltepa","Tomdi","Uchquduq","Xatirchi","Navoiy shahri","Zarafshon shahri"],
"Namangan viloyati":["Chortoq","Chust","Kosonsoy","Mingbuloq","Namangan","Norin","Pop","Toâ€˜raqoâ€˜rgâ€˜on","Uchqoâ€˜rgâ€˜on","Uychi","Yangiqoâ€˜rgâ€˜on","Namangan shahri"],
"Samarqand viloyati":["Bulungâ€˜ur","Ishtixon","Jomboy","Kattaqoâ€˜rgâ€˜on","Narpay","Nurobod","Oqdaryo","Paxtachi","Payariq","Pastdargâ€˜om","Samarqand","Toyloq","Urgut","Samarqand shahri","Kattaqoâ€˜rgâ€˜on shahri"],
"Surxondaryo viloyati":["Angor","Bandixon","Boysun","Denov","Jarqoâ€˜rgâ€˜on","Muzrabot","Oltinsoy","Qiziriq","Qumqoâ€˜rgâ€˜on","Sariosiyo","Sherobod","Shoâ€˜rchi","Termiz","Uzun","Termiz shahri"],
"Sirdaryo viloyati":["Boyovut","Guliston","Mirzaobod","Oqoltin","Sayxunobod","Sirdaryo","Xovos","Yangiyer shahri","Guliston shahri","Shirin shahri"],
"Toshkent viloyati":["Bekobod","Boâ€˜ka","Boâ€˜stonliq","Chinoz","Qibray","Ohangaron","Oqqoâ€˜rgâ€˜on","Parkent","Piskent","Quyichirchiq","Yangiyoâ€˜l","Yuqorichirchiq","Zangiota","Angren shahri","Bekobod shahri","Chirchiq shahri","Olmaliq shahri","Ohangaron shahri","Yangiyoâ€˜l shahri"],
"Fargâ€˜ona viloyati":["Bagâ€˜dod","Beshariq","Dangâ€˜ara","Furqat","Oltiariq","Qoâ€˜shtepa","Quva","Rishton","Soâ€˜x","Toshloq","Uchkoâ€˜prik","Yozyovon","Fargâ€˜ona shahri","Margâ€˜ilon shahri","Quvasoy shahri","Qoâ€˜qon shahri"],
"Xorazm viloyati":["Bogâ€˜ot","Gurlan","Hazorasp","Xiva","Xonqa","Qoâ€˜shkoâ€˜pir","Shovot","Urganch","Yangiariq","Yangibozor","Urganch shahri","Xiva shahri"],
"Toshkent shahri":["Bektemir","Chilonzor","Mirobod","Mirzo Ulugâ€˜bek","Olmazor","Sergeli","Shayxontohur","Uchtepa","Yakkasaroy","Yunusobod","Yashnobod"]
};

function init(){
["from","to"].forEach(t=>{
  const r=document.getElementById(t+"Region");
  const d=document.getElementById(t+"District");
  r.innerHTML=Object.keys(regions).map(v=>`<option>${v}</option>`).join("");
  r.onchange=()=>d.innerHTML=regions[r.value].map(x=>`<option>${x}</option>`).join("");
  r.onchange();
});
}
init();

function openAdd(){home.classList.add("hidden");add.classList.remove("hidden")}
function back(){add.classList.add("hidden");home.classList.remove("hidden")}

// ğŸ”¥ SAQLASH + RASM (ixtiyoriy)
function save(){
  const data={
    from: fromRegion.value+" / "+fromDistrict.value,
    to: toRegion.value+" / "+toDistrict.value,
    weight: weight.value,
    contact: contact.value,
    image: null
  };

  const file=image.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=()=>{
      data.image=reader.result;
      pushData(data);
    };
    reader.readAsDataURL(file);
  }else{
    pushData(data);
  }
}

function pushData(data){
  const arr=JSON.parse(localStorage.getItem("loads")||"[]");
  arr.unshift(data);
  localStorage.setItem("loads",JSON.stringify(arr));
  render();
  back();
}

// ğŸ§¾ CHIQARISH
function render(){
  const arr=JSON.parse(localStorage.getItem("loads")||"[]");
  list.innerHTML="";
  arr.forEach(l=>{
    list.innerHTML+=`
      <div class="load-card">
        <b>${l.weight||"Yuk"}</b>
        <div class="location">ğŸ“ ${l.from} â†’ ${l.to}</div>
        ${l.image?`<img src="${l.image}">`:""}
      </div>`;
  });
}
render();
</script>

</body>
</html>
